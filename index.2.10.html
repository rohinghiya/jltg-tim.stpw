<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Jet Lag: Stopwatch & Timers</title>
<style>
:root{
  --bg:#07111c;
  --card:#0f2033aa;
  --muted:#a7b4c7;
  --text:#eaf2ff;
  --accentA:#00e0ff;
  --accentB:#ff3ea5;
  --accentC:#ffe066;
  --ok:#3ddc97;
  --danger:#ff5c77;
  --shadow: 0 10px 30px rgba(0,0,0,.35);
  --radius: 18px;
}
*{box-sizing:border-box;margin:0;padding:0}
body{
  font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial;
  color:var(--text);
  background:linear-gradient(180deg, #081524, #050c15);
  min-height:100vh;
  display:flex;
  flex-direction:column;
  padding:16px;
}
header{
  display:flex;flex-direction:column;align-items:center;text-align:center;gap:10px;margin-bottom:16px;
}
.logo{
  width:60px;height:60px;border-radius:12px;display:grid;place-items:center;
  background: conic-gradient(from 210deg, var(--accentA), var(--accentB));
  font-weight:900;color:#001018;box-shadow:var(--shadow);
}
h1{font-size:1.4rem;font-weight:800}
p{color:var(--muted);font-size:0.9rem}
.pill{padding:6px 12px;border-radius:999px;border:1px solid rgba(255,255,255,.18);font-size:0.75rem;margin-top:4px}
.card{
  background:rgba(12,25,40,.55);
  border:1px solid rgba(255,255,255,.08);
  border-radius:var(--radius);
  box-shadow:var(--shadow);
  backdrop-filter: blur(8px);
  margin-bottom:16px;
  padding:16px;
  width:100%;
}
label{font-size:0.85rem;color:#b7c5db;margin-bottom:4px;display:block}
select,input,button{
  width:100%;padding:12px;border-radius:12px;border:1px solid rgba(255,255,255,.12);
  background:#0a1827;color:var(--text);font-size:1rem;margin-bottom:12px;
}
button{
  cursor:pointer;font-weight:700;transition:transform .06s ease;
}
button:active{transform:scale(0.98)}
.btn-primary{background:linear-gradient(135deg, var(--accentA), var(--accentB));color:#07111c;border:none}
.btn-outline{background:transparent;border:1.5px solid rgba(255,255,255,.18)}
.timer-buttons button{
  width:auto;margin:4px;padding:10px 16px;font-weight:700;
}
.display{
  font-size:1.8em;margin-bottom:8px;font-weight:700;
  display:flex;justify-content:space-between;align-items:center;
}
.display span{flex:1}
.display button{flex:none;margin-left:10px;padding:2px 6px;font-size:0.75em;border-radius:6px;}
.footer{text-align:center;color:#8ea3bd;font-size:0.75rem;margin-top:auto}
</style>
</head>
<body>

<header>
  <div class="logo">JL</div>
  <h1>Stopwatch & Timers</h1>
  <p>Pick a timer section, click a button, and run multiple timers simultaneously.</p>
  <div class="pill">Inspired by Jet Lag: The Game</div>
</header>

<div class="card">
  <label>Stopwatch</label>
  <div class="display" id="stopwatch">00:00.00</div>
  <button onclick="startStopwatch()">Start</button>
  <button onclick="pauseStopwatch()">Pause</button>
  <button onclick="resetStopwatch()">Reset</button>
</div>

<div class="card">
  <label for="sectionSelect">Select Timer Section</label>
  <select id="sectionSelect" onchange="loadTimers()">
    <option value="">-- Select --</option>
    <option value="hiding">Hiding Period Timers</option>
    <option value="curses">Curse Timers</option>
    <option value="question">Question Timers</option>
  </select>
  <div class="timer-buttons" id="timerButtons"></div>
</div>

<div class="card">
  <label>Active Timers</label>
  <div id="activeTimers"></div>
</div>

<audio id="timerSound">
  <source src="https://actions.google.com/sounds/v1/alarms/alarm_clock.ogg" type="audio/ogg">
</audio>

<div class="footer">Fan-made for friendly play. Not affiliated with the official creators.</div>

<script>
// Stopwatch
let stopwatchInterval;
let stopwatchTime = 0;
function updateStopwatchDisplay(){
  let ms = stopwatchTime % 1000;
  let totalSeconds = Math.floor(stopwatchTime / 1000);
  let minutes = Math.floor(totalSeconds / 60);
  let seconds = totalSeconds % 60;
  const display = document.getElementById("stopwatch");
  display.innerText = `${String(minutes).padStart(2,'0')}:${String(seconds).padStart(2,'0')}.${String(Math.floor(ms/10)).padStart(2,'0')}`;
}
function startStopwatch(){
  if(!stopwatchInterval){
    let lastTime = Date.now();
    stopwatchInterval = setInterval(()=>{
      let now = Date.now();
      stopwatchTime += now - lastTime;
      lastTime = now;
      updateStopwatchDisplay();
    },10);
  }
}
function pauseStopwatch(){
  clearInterval(stopwatchInterval);
  stopwatchInterval=null;
}
function resetStopwatch(){
  pauseStopwatch();
  stopwatchTime=0;
  updateStopwatchDisplay();
}

// Timer Sections (minutes)
const timers = {
  hiding:[30,60,180],
  curses:[5,8,10,12,15,20,30,40,60],
  question:[5,10]
};

function loadTimers(){
  const section=document.getElementById("sectionSelect").value;
  const container=document.getElementById("timerButtons");
  container.innerHTML='';
  if(timers[section]){
    timers[section].forEach(minutes=>{
      const btn=document.createElement("button");
      btn.className="btn-outline";
      btn.innerText = minutes + " min";
      btn.onclick = ()=> startCountdown(section, minutes);
      container.appendChild(btn);
    });
  }
}

// Active timers tracking
const activeTimers = {}; // {section: {minutes, remaining, interval, element}}

function startCountdown(section, minutes){
  // Stop previous timer for same section if running
  if(activeTimers[section]){
    clearInterval(activeTimers[section].interval);
    activeTimers[section].element.remove();
  }

  const container = document.getElementById("activeTimers");
  const timerDiv = document.createElement("div");
  timerDiv.className = "display";

  const labelSpan = document.createElement("span");
  labelSpan.innerText = `${section} - ${minutes} min`;

  const stopBtn = document.createElement("button");
  stopBtn.innerText = "Stop";
  stopBtn.onclick = ()=>{
    clearInterval(interval);
    timerDiv.remove();
    delete activeTimers[section];
  }

  timerDiv.appendChild(labelSpan);
  timerDiv.appendChild(stopBtn);
  container.appendChild(timerDiv);

  let remaining = minutes * 60; // in seconds
  const interval = setInterval(()=>{
    remaining--;
    if(remaining<=0){
      clearInterval(interval);
      labelSpan.innerText = `${section} timer done!`;
      document.getElementById("timerSound").play();
    } else {
      const remMin = Math.floor(remaining/60);
      const remSec = remaining%60;
      labelSpan.innerText = `${section} - ${remMin} min ${remSec} sec remaining`;
    }
  },1000);

  activeTimers[section] = {minutes, remaining, interval, element:timerDiv};
}
</script>
</body>
</html>
